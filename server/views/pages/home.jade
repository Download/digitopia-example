extends ../wrapper

block seo
	title.
		Home

block content
	.row
		.col-xs-12

			if alert
				.alert.alert-info
					= alert
				
			if user
				p.
					Logged in as #{user.email}
					
				- var fb,tw
				
				if user.identities()
					for identity in user.identities()
						if identity.provider === 'facebook'
							- fb= identity
						if identity.provider === 'twitter'
							- tw= identity
							
				if fb
					p Linked w/facebook account
				else 
					p
						a(href="/auth/facebook" data-no-hijax="true") Link w/ Facebook Account
					
				if tw
					p Linked w/twitter account
				else 
					p
						a(href="/auth/twitter" data-no-hijax="true") Link w/ Twitter Account
						
				p
					a.btn.btn-primary(href="/upload") Upload a file
					
				p
					button.btn.btn-default(data-jsclass="logoutController").
							Log Out
							
			else
				h3 Login or 
					a(href="/register") Create Account
						
				form.form.form-inline(data-jsclass="loginController")
					.form-group
						input.form-control(type="text" name="email" placeholder="Email address")
					.form-group
						input.form-control(type="password" name="password" placeholder="Password")
					.form-group
						input.form-control.btn.btn-primary(type="submit")

				h3 Use Passport
				.btn-group
					a.btn.btn-primary(href= "/auth/facebook" data-no-hijax="true") Facebook
					a.btn.btn-primary(href= "/auth/twitter" data-no-hijax="true") Twitter

	.row
		.col-xs-12
			h3 OG Tag Preview
			.ogPreview.lazy-instantiate(data-lazy-jsclass="OgTagPreview" data-src="/api/OgTags/scrape" data-url="https://www.youtube.com/watch?v=G6Y5xLvYdMM" data-type="json")

			.ogPreview.lazy-instantiate(data-lazy-jsclass="OgTagPreview" data-src="/api/OgTags/scrape" data-url="http://www.nytimes.com/interactive/2016/08/02/business/dealbook/this-is-your-life-private-equity.html?hp&action=click&pgtype=Homepage&clickSource=story-heading&module=photo-spot-region&region=top-news&WT.nav=top-news&_r=0" data-type="json")

			.ogPreview.lazy-instantiate(data-lazy-jsclass="OgTagPreview" data-src="/api/OgTags/scrape" data-url="https://en.wikipedia.org/wiki/Sloth" data-type="json")
